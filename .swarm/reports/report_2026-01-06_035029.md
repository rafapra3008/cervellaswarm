# Swarm Report - 2026-01-06

*Generato: mar  6 gen 2026 03:50:29 CET*

## Statistiche

| Metrica | Valore |
|---------|--------|
| Task completati | 32 |
| Task in corso | 3 |
| Task pending | 4 |

## Task Completati

### HARDTEST_NOTIFICA_001

- **Agente:** cervella-backend
- **Priorita:** 

**Output:**
```
HARDTEST NOTIFICA: PASSATO!
```

### TASK_20260105_042820_migliorare_testo_inizio_sessione

- **Agente:**  cervella-docs
- **Priorita:**  MEDIA

_Nessun output trovato_

### TASK_20260105_042827_studio_come_monitorare_i

- **Agente:**  cervella-researcher
- **Priorita:**  MEDIA

**Output:**
```
# Studio: Come Monitorare i Worker e Cosa Fare Mentre Lavorano

> **Data:** 5 Gennaio 2026
> **Autore:** cervella-researcher
> **Task ID:** TASK_20260105_042827_studio_come_monitorare_i

---

## Indice

1. [Strumenti di Monitoraggio Esistenti](#1-strumenti-di-monitoraggio-esistenti)
2. [Come Usare il Dashboard](#2-come-usare-il-dashboard)
3. [Cosa Fare Mentre i Worker Lavorano](#3-cosa-fare-mentre-i-worker-lavorano)
4. [Pattern Consigliati](#4-pattern-consigliati)
5. [Comandi Rapidi](#5-comandi-rapidi)

---

## 1. Strumenti di Monitoraggio Esistenti

Lo swarm CervellaSwarm ha **4 strumenti** di monitoraggio gia pronti:

### 1.1 Dashboard Python (CONSIGLIATO!)

```bash
# Visualizzazione singola
python3 scripts/swarm/dashboard.py

# Monitoring LIVE (refresh ogni 2 secondi)
python3 scripts/swarm/dashboard.py --watch
... (troncato)
```

### TASK_20260105_050500_worker_health_tracking

- **Agente:**  cervella-backend
- **Priorita:**  ALTA

**Output:**
```
# Output: Worker Health Tracking System

**Task:** TASK_20260105_050500_worker_health_tracking
**Eseguito da:** cervella-backend
**Data:** 2026-01-05
**Stato:** COMPLETATO

---

## Cosa e' stato fatto

### 1. Modificato spawn-workers (v2.0.1 -> v2.1.0)

**File:** `~/.local/bin/spawn-workers`

Aggiunto nel runner script:

```bash
# Health tracking - salva PID e timestamp
mkdir -p .swarm/status
WORKER_PID=$$
WORKER_NAME="backend"  # o frontend, tester, ecc.
echo $WORKER_PID > ".swarm/status/worker_${WORKER_NAME}.pid"
date +%s > ".swarm/status/worker_${WORKER_NAME}.start"

# Cleanup automatico quando il worker termina
cleanup_health_files() {
    rm -f ".swarm/status/worker_${WORKER_NAME}.pid"
    rm -f ".swarm/status/worker_${WORKER_NAME}.start"
}
... (troncato)
```

### TASK_20260105_051500_studio_visibilita_guardiana

- **Agente:**  cervella-guardiana-ricerca
- **Priorita:**  ALTA

**Output:**
```
# Studio Visibilita Worker - Guardiana Ricerca

**Data:** 05 Gennaio 2026
**Autore:** cervella-guardiana-ricerca
**Versione:** 1.0.0

---

## PARTE 1: La Mia Ricerca Indipendente

### 1. Analisi del Problema

Il problema centrale e' che lavoriamo "al buio" - quando un worker viene spawnato in una finestra Terminal separata, non abbiamo:

1. **Visibilita' LIVE**: Cosa sta facendo il worker in questo momento?
2. **Progress tracking**: A che punto e' del task?
3. **Alerting proattivo**: Il worker e' bloccato? Ha finito? Ha errori?

Attualmente abbiamo:
- `.swarm/status/worker_NAME.pid` - PID del processo
- `.swarm/status/worker_NAME.start` - Timestamp avvio
- `.swarm/logs/worker_TIMESTAMP.log` - Log COMPLETO dopo esecuzione

Ma NON abbiamo:
- Streaming live del log
- Notifiche di progresso
- Dashboard real-time dei contenuti

---

... (troncato)
```

### TASK_20260105_051500_studio_visibilita_researcher

- **Agente:**  cervella-researcher
- **Priorita:**  ALTA

**Output:**
```
# Studio Visibilita Real-Time Worker - Output Ricerca

**Data:** 5 Gennaio 2026
**Agente:** cervella-researcher
**Task:** TASK_20260105_051500_studio_visibilita_researcher

---

## 1. Analisi del Problema

### Stato Attuale

Il sistema CervellaSwarm ha GIA' implementato:

| Cosa Esiste | File | Cosa Fa |
|-------------|------|---------|
| Dashboard ASCII | `scripts/swarm/dashboard.py` | Mostra stato task (pending/working/done) |
| Monitor Status | `scripts/swarm/monitor-status.sh` | Lista task con emoji stato |
| Worker Health Tracking | spawn-workers.sh v2.1.0 | PID/timestamp in `.swarm/status/` |
| Log files | `.swarm/logs/worker_*.log` | Output completo MA post-mortem |

### Il Gap: Cosa MANCA

```
+------------------------------------------------------------------+
|                                                                  |
|   PROBLEMA CENTRALE                                              |
|                                                                  |
|   I log esistono, ma sono POST-MORTEM!                          |
|   Vediamo cosa e' successo DOPO che e' finito.                  |
... (troncato)
```

### TASK_20260105_122004_code_review_settimanale_cervellaswarm

- **Agente:**  cervella-reviewer
- **Priorita:**  MEDIA

**Output:**
```
# Code Review Settimanale CervellaSwarm

**Data:** 5 Gennaio 2026
**Reviewer:** cervella-reviewer
**Versione:** 1.0.0

---

## File Analizzati

| File | Path | Righe | Versione |
|------|------|-------|----------|
| spawn-workers.sh | scripts/swarm/ | 657 | v2.2.0 |
| swarm-status.sh | .swarm/scripts/ | 374 | v1.1.0 |
| swarm-review.sh | .swarm/scripts/ | 479 | v1.1.0 |
| context_scorer.py | scripts/memory/ | 388 | v1.0.0 |

**Note:** `quick-task`, `swarm-heartbeat` e `context_check.py` non trovati nel repository.

---

## 1. spawn-workers.sh

### Punteggio: 8.5/10

### Punti di Forza

1. **Configurazione centralizzata** (v2.0.0): Usa `~/.swarm/config` per settings globali
2. **Project-aware** (v1.9.0): Trova automaticamente la root del progetto cercando `.swarm/`
3. **Health tracking** (v1.6.0): Salva PID e timestamp per monitoring worker
... (troncato)
```

### TASK_20260105_122749_fix_code_review_3

- **Agente:**  cervella-backend
- **Priorita:**  MEDIA

**Output:**
```
# Output: Fix Code Review - 3 task

**Worker:** cervella-backend
**Data:** 5 Gennaio 2026
**Stato:** COMPLETATO

---

## Modifiche Effettuate

### 1. Creato ~/.local/lib/swarm-lib.sh

**File:** `~/.local/lib/swarm-lib.sh`
**Versione:** 1.0.0

Libreria comune con funzioni condivise:
- `find_project_root()` - Trova root progetto con .swarm/
- `get_assigned_to()` - Estrae assegnazione da task .md
- `time_ago()` - Formatta tempo trascorso
- `print_success/warning/error/info()` - Output colorato
- `validate_config_ownership()` - Validazione sicurezza config
- `get_claude_bin()` - Auto-detect Claude CLI
- `get_guardian_for_agent()` - Mapping agente -> guardiana
- `load_swarm_config()` - Carica config con validazione
- Colori standard (RED, GREEN, YELLOW, etc.)

---

### 2. Validazione Ownership in spawn-workers.sh

... (troncato)
```

### TASK_20260105_123249_studio_notifica_automatica_quando

- **Agente:**  cervella-devops
- **Priorita:**  MEDIA

**Output:**
```
# Output: STUDIO Notifica Automatica Worker

**Task ID:** TASK_20260105_123249
**Worker:** cervella-devops
**Data completamento:** 5 Gennaio 2026
**Esito:** COMPLETATO

---

## Cosa e' stato fatto

### 1. Studio Completo
Creato documento di studio approfondito in:
`docs/studio/STUDIO_NOTIFICA_WORKER.md`

Contenuti dello studio:
- Analisi osascript nativo (pro/contro)
- Analisi terminal-notifier (pro/contro, click action)
- Confronto tra le due soluzioni
- Decisione: approccio IBRIDO

### 2. Implementazione in spawn-workers.sh

**Versione:** 2.3.0 -> 2.4.0

**Modifiche:**
- Aggiunta notifica DETTAGLIATA al termine del worker con:
  - Nome worker (cervella-backend, cervella-frontend, ecc.)
  - Tempo di esecuzione (es: "2m 34s")
  - Esito (Completato / Errore con exit code)
... (troncato)
```

### TASK_20260105_125102_hardtest_scrivi_una_riga

- **Agente:**  cervella-docs
- **Priorita:**  MEDIA

**Output:**
```
# Output: HARDTEST Notifica

**Worker:** cervella-docs
**Data:** 2026-01-05 12:51:30
**Stato:** COMPLETATO

---

## Risultato

File `TEST_NOTIFICA_output.md` creato con successo!

Contenuto scritto:
```
Notifica funziona! Timestamp: 2026-01-05 12:51:30
```

---

## Checklist

- [x] Obiettivo raggiunto
- [x] Output scritto in _output.md
- [x] File .done creato

---

*cervella-docs - Task completato!*
```

### TASK_20260105_125413_hardtest_2_scrivi_click

- **Agente:**  cervella-docs
- **Priorita:**  MEDIA

**Output:**
```
# Output: HARDTEST 2 - Click test

**Completato da:** cervella-docs
**Data:** 5 Gennaio 2026

---

## Risultato

Task completato con successo.

Ho scritto "Click test OK!" nel file `.swarm/tasks/TEST_CLICK_output.md`.

---

## Checklist Verifica

- [x] Obiettivo raggiunto
- [x] Output scritto in _output.md
- [x] File .done creato

---

*cervella-docs*
```

### TASK_20260105_130713_hardtest_3_scrivi_test

- **Agente:**  cervella-docs
- **Priorita:**  MEDIA

**Output:**
```
# Output: HARDTEST 3 - Test Screenshot

Test screenshot OK! Timestamp: Mon Jan  5 13:07:13 CET 2026

---

**Task completato da:** cervella-docs
**Data completamento:** 5 Gennaio 2026
```

### TASK_20260105_131133_fix_notifica_click_quando

- **Agente:**  cervella-backend
- **Priorita:**  MEDIA

**Output:**
```
# Output: FIX NOTIFICA CLICK

**Task:** TASK_20260105_131133_fix_notifica_click_quando
**Worker:** cervella-backend
**Data:** 05 January 2026
**Esito:** COMPLETATO

---

## Problema Risolto

Quando cliccavi sulla notifica del worker terminato, si apriva Console.app con il file `.log`.
Ora invece si apre il file `_output.md` del task completato (molto piu utile!).

---

## Modifiche Apportate

**File:** `scripts/swarm/spawn-workers.sh`

### 1. Versione aggiornata
- Da: 2.4.0
- A: 2.5.0

### 2. Nuova logica per trovare l'output (righe 509-538)

```bash
# v2.5.0: Trova l'ultimo task completato
TASK_OUTPUT_FILE=""

... (troncato)
```

### TASK_20260105_131436_hardtest_finale_scrivi_magia

- **Agente:**  cervella-docs
- **Priorita:**  MEDIA

**Output:**
```
# Output: HARDTEST FINALE

**Task:** TASK_20260105_131436_hardtest_finale_scrivi_magia
**Worker:** cervella-docs
**Data:** 5 Gennaio 2026

---

## Risultato

MAGIA FUNZIONA! Il click apre questo file!

---

## Status

Completato con successo.

---

*cervella-docs*
```

### TASK_20260105_151236_code_review_settimanale_analizza

- **Agente:**  cervella-reviewer
- **Priorita:**  MEDIA

**Output:**
```
# CODE REVIEW SETTIMANALE - CervellaSwarm

**Data:** 5 Gennaio 2026
**Reviewer:** cervella-reviewer
**Focus:** Sistema anti-compact, spawn-workers, swarm scripts

---

## EXECUTIVE SUMMARY

Il sistema CervellaSwarm e' **SOLIDO e BEN STRUTTURATO**. La versione attuale (spawn-workers v2.7.0) mostra maturita' ingegneristica con:
- AUTO-SVEGLIA come default (ottima scelta!)
- Security checks (config ownership validation)
- Health tracking con heartbeat
- Gestione robusta degli stati dei task

**Rating complessivo: 8.5/10** - Sistema pronto per produzione con alcune ottimizzazioni suggerite.

---

## ANALISI DETTAGLIATA

### 1. spawn-workers.sh (v2.7.0)

**PUNTI DI FORZA:**
- Security: `validate_config_ownership()` previene config injection
- Robustezza: Check anti-watcher-duplicati (v2.7.0)
- Flessibilita': Project-aware - funziona da qualsiasi directory con .swarm/
- UX: Notifiche dettagliate con durata e click per aprire output

... (troncato)
```

### TASK_CODE_REVIEW_SWARM

- **Agente:**  cervella-reviewer
- **Priorita:** 

_Nessun output trovato_

### TASK_CODE_REVIEW_WEEKLY

- **Agente:**  cervella-reviewer
- **Priorita:** 

**Output:**
```
# Output: Code Review Settimanale

**Task:** TASK_CODE_REVIEW_WEEKLY
**Worker:** cervella-reviewer
**Status:** COMPLETATO
**Data:** 5 Gennaio 2026

---

## Risultato

**Rating Complessivo: 8.5/10**

Report completo salvato in: `reports/code_review_20260105.md`

### Highlights

- **0 problemi critici trovati**
- spawn-workers.sh v2.8.0: 9/10
- block_task_for_agents.py: 9/10
- context_check.py v5.1.0: 8.5/10
- 16 agenti: tutti consistenti

### Raccomandazione

Procedere con test ANTI-COMPACT v5.1.0 in sessione reale.

---

*cervella-reviewer*
```

### TASK_DASHBOARD_HEARTBEAT

- **Agente:**  cervella-backend
- **Priorita:**  ALTA

**Output:**
```
# Output: TASK_DASHBOARD_HEARTBEAT

**Completato da:** cervella-backend
**Data:** 2026-01-05

---

## Risultato

Aggiornato `scripts/swarm/dashboard.py` a v1.1.0 con sezione LIVE HEARTBEAT.

### Verifiche Passate

- [x] Funzione get_live_activity_from_heartbeat() aggiunta
- [x] Funzione render_heartbeat() aggiunta
- [x] render_dashboard() include render_heartbeat()
- [x] Versione aggiornata a 1.1.0
- [x] Nessun errore di sintassi Python

### Test Effettuato

Dashboard funziona correttamente e mostra:

```
║  LIVE HEARTBEAT                                                                       ║
║  backend      ACTIVE (1m   ) Test heartbeat                             ║
```

Se nessun heartbeat:
```
... (troncato)
```

### TASK_FIX_CONFIG

- **Agente:**  cervella-backend
- **Priorita:** 

**Output:**
```
# Output: TASK_FIX_CONFIG

**Completato da:** cervella-backend
**Data:** 2026-01-05 03:15

## Cosa e' stato fatto

### 1. Creato ~/.swarm/config
File di configurazione centralizzata con:
- `SWARM_PROJECTS` - Lista progetti da monitorare
- `CLAUDE_BIN` - Path Claude CLI (auto-detect se vuoto)
- `STALE_THRESHOLD` - Timeout task stale (1800s default)
- `NOTIFICATIONS_ENABLED` - Notifiche macOS
- `NOTIFICATION_SOUND` - Suono notifiche

### 2. Modificato swarm-status (v1.1.0)
- Aggiunto source di ~/.swarm/config
- Rimosso array PROJECTS hardcodato
- Usa SWARM_PROJECTS da config con fallback a defaults

### 3. Modificato swarm-review (v1.1.0)
- Aggiunto source di ~/.swarm/config
- Rimosso array PROJECTS hardcodato
- Usa SWARM_PROJECTS da config con fallback a defaults

### 4. Modificato spawn-workers (v2.0.0)
- Aggiunto source di ~/.swarm/config
- Aggiunta funzione get_claude_bin() per auto-detect
- Rimosso path NVM hardcodato (/Users/rafapra/.nvm/...)
- Usa CLAUDE_BIN da config con fallback chain:
... (troncato)
```

### TASK_FIX_SECURITY_ALTO

- **Agente:**  cervella-backend
- **Priorita:**  ALTA (sicurezza!)

**Output:**
```
# Output: Fix Problemi ALTI Sicurezza

**Worker:** cervella-backend
**Completato:** 2026-01-05 04:20 UTC
**Stato:** COMPLETATO

---

## Fix Applicati

### Problema 1: Path NVM Hardcodato - FIXATO

**File modificati:**
- `~/.swarm/config` (riga 47-62)
- `~/.local/lib/swarm-common.sh` (riga 155-171)
- `~/.local/bin/spawn-workers` (riga 44-60)

**Soluzione:**
```bash
# Invece di versione hardcodata v24.11.0:
local nvm_claude
nvm_claude=$(ls -t "$HOME"/.nvm/versions/node/*/bin/claude 2>/dev/null | head -1)
if [[ -n "$nvm_claude" && -x "$nvm_claude" ]]; then
    echo "$nvm_claude"
fi
```

**Testato:** `source ~/.swarm/config && get_claude_bin` -> OK!

---
... (troncato)
```

### TASK_HARDTEST_NOTIFICA_CLICK

- **Agente:**  cervella-docs
- **Priorita:**  ALTA

**Output:**
```
# HARDTEST Notifica Click - COMPLETATO!

**Data:** 5 Gennaio 2026
**Ora:** 13:49 UTC
**Worker:** cervella-docs

---

## Risultato

HARDTEST COMPLETATO CON SUCCESSO!

## Messaggio per Rafa

Ciao Rafa!

Se stai leggendo questo file significa che:
1. Il task e' stato eseguito correttamente
2. La notifica e' arrivata
3. Il click sulla notifica ha aperto questo file!

Il sistema di notifiche con terminal-notifier funziona perfettamente!

---

*HARDTEST Sessione 95 - CervellaSwarm*
*cervella-docs*
```

### TASK_HEARTBEAT_SPAWN_WORKERS

- **Agente:**  cervella-backend
- **Priorita:**  ALTA

**Output:**
```
# Output: TASK_HEARTBEAT_SPAWN_WORKERS

**Completato da:** cervella-backend
**Data:** 2026-01-05

---

## Risultato

Il file `~/.local/bin/spawn-workers` conteneva GIA le modifiche richieste!

### Verifiche Passate

- [x] Prompt base contiene sezione HEARTBEAT (linee 130-137)
- [x] Istruzioni notifica INIZIO task presenti (linee 146-149)
- [x] Formato heartbeat corretto: `timestamp|task|azione`
- [x] Virgolette dritte in tutti gli osascript

### Sezione HEARTBEAT (linee 130-137)

```
HEARTBEAT (IMPORTANTE - fallo ogni 60 secondi mentre lavori!):
Scrivi il tuo stato attuale per la Regina:
echo "$(date +%s)|NOME_TASK|cosa stai facendo ora" >> .swarm/status/heartbeat_WORKER.log

Esempio:
echo "$(date +%s)|TASK_123|Analizzando file database.py" >> .swarm/status/heartbeat_backend.log

Questo permette alla Regina di vedere il tuo progresso in tempo reale!
```
... (troncato)
```

### TASK_IMPROVE_TEMPLATES

- **Agente:**  cervella-docs
- **Priorita:** 

**Output:**
```
# Output: TASK_IMPROVE_TEMPLATES

**Worker:** cervella-docs
**Data:** 2026-01-05
**Stato:** COMPLETATO

---

## Cosa e stato fatto

### 1. TEMPLATE_TASK.md (aggiornato)

Template principale migliorato con:
- Header con tutti i metadata (assegnato, stato, priorita, dipende da, stima, rischio)
- Sezione Contesto per spiegare il "perche"
- Sezione Specifiche con Input/Output/Vincoli
- Lista file da modificare
- Chi verifichera (Guardiana + livello)
- Footer con versione template

### 2. TEMPLATE_TASK_QUICK.md (nuovo)

Template snello per task semplici:
- Solo campi essenziali (assegnato, stato, priorita)
- Obiettivo diretto
- Output richiesto
- Un criterio di successo

### 3. TEMPLATE_TASK_RESEARCH.md (nuovo)

... (troncato)
```

### TASK_QUICK_TASK_COMMAND

- **Agente:**  cervella-backend
- **Priorita:**  ALTA

**Output:**
```
# Output: TASK_QUICK_TASK_COMMAND

**Worker:** cervella-backend
**Data completamento:** 5 Gennaio 2026 04:27
**Stato:** COMPLETATO

---

## Cosa Ho Fatto

### 1. Creato script `~/.local/bin/quick-task`

Script bash completo che:
- Trova automaticamente la root del progetto (cerca `.swarm/`)
- Genera nome task con timestamp + slug descrizione
- Crea file `TASK_*.md` con template completo
- Crea file `.ready` per marcare come pronto
- Spawna automaticamente il worker appropriato

### 2. Caratteristiche Implementate

**Uso base:**
```bash
quick-task "Fix bug authentication" --backend
quick-task "Add dark mode toggle" --frontend
quick-task "Write unit tests" --tester
```

**Worker supportati:**
- `--backend` - cervella-backend
... (troncato)
```

### TASK_REGOLA_VIA_GIUSTA

- **Agente:**  cervella-docs
- **Priorita:**  MEDIA

**Output:**
```
# Output: Integrazione Regola "Via Giusta" nel DNA

**Worker:** cervella-docs
**Data:** 5 Gennaio 2026
**Status:** COMPLETATO

---

## Cosa Ho Fatto

Aggiunta la **Regola 14: VIA GIUSTA, NON VIA FACILE!** nel DNA di `cervella-orchestrator.md`.

La regola e stata inserita nella sezione "Regole Inviolabili", dopo la Regola 6.

---

## File Modificati

| File | Azione |
|------|--------|
| `~/.claude/agents/cervella-orchestrator.md` | Aggiunta Regola 14 (righe 389-420) |

---

## Contenuto Aggiunto

```markdown
### 14. VIA GIUSTA, NON VIA FACILE!

- Citazione di Rafa: "senza pigrizia.. facciamo le cose giuste!"
... (troncato)
```

### TASK_REVIEW_HOOKS_SCRIPTS

- **Agente:**  cervella-reviewer
- **Priorita:**  ALTA

**Output:**
```
# Output: TASK_REVIEW_HOOKS_SCRIPTS

**Completato:** 5 Gennaio 2026
**Worker:** cervella-reviewer
**Durata:** ~10 minuti

---

## Risultato

Review COMPLETA eseguita su:
- 8 hooks Python in `~/.claude/hooks/`
- 4 scripts Bash in `~/.local/bin/`
- 2 file config (`~/.swarm/config`, `~/.local/lib/swarm-common.sh`)

---

## Rating Finale: 8.5/10

---

## Problemi Trovati

| Livello | Conteggio | Principali |
|---------|-----------|------------|
| ALTO | 3 | Path NVM hardcodato, escape incompleto, command injection potenziale |
| MEDIO | 5 | Error handling silenzioso, codice duplicato, timeout mancanti |
| BASSO | 4 | Versioni inconsistenti, logging non standard, file temporanei |

---
... (troncato)
```

### TASK_RICERCA_AUTO_SVEGLIA_REGINA

- **Agente:**  cervella-researcher
- **Priorita:**  ALTISSIMA - Questa e' la MAGIA SOPRA MAGIA!

**Output:**
```
# RICERCA: Auto-Sveglia Regina - Output Completo

**Data:** 5 Gennaio 2026
**Ricercatore:** cervella-researcher
**Sessione:** 95 - CervellaSwarm

---

## Executive Summary

Dopo un'analisi approfondita di hooks, MCP, stdin/IPC e meccanismi di automazione macOS, la conclusione e':

**NON esiste un modo nativo per "svegliare" una Regina Claude in attesa.**

Claude Code e' progettato come un sistema **PULL-based**: Claude chiede, gli strumenti rispondono. Non esiste un canale **PUSH** dove un worker puo' iniettare messaggi in una sessione Claude in esecuzione.

TUTTAVIA, esistono **workaround creativi** che possono simulare questo comportamento!

---

## 1. Analisi Tecnica - Come Funziona Claude Code

### Architettura Fondamentale

```
+-------------------+     PULL     +------------------+
|   Claude Code     | <----------> |   Tools/MCP     |
|   (richiede)      |              |   (risponde)    |
+-------------------+              +------------------+
        |
... (troncato)
```

### TASK_STUDIO_AUTONOMIA_REGINA

- **Agente:**  cervella-researcher
- **Priorita:**  CRITICA

**Output:**
```
# Studio: Perché la Regina Non Usa Spawn-Workers in Autonomia?

> **Data:** 5 Gennaio 2026
> **Autore:** cervella-researcher
> **Task:** TASK_STUDIO_AUTONOMIA_REGINA

---

## 1. ANALISI DEL PROBLEMA

### Cosa Succede

La Regina (Cervella principale) ha la **Regola 13** nel suo DNA:
```
SE MODIFICA FILE → spawn-workers (finestra separata!)
SE SOLO LEGGE → Task tool (interno)
```

Ma **viola continuamente questa regola**, facendo edit diretti:
- Sessione 90: 3 violazioni corrette da Rafa
- Pattern ricorrente in sessioni precedenti

### PERCHÉ Succede? (Root Cause Analysis)

#### Causa 1: FRIZIONE DEL PROCESSO (Principale!)

```
spawn-workers richiede:
1. Creare file .swarm/tasks/TASK_NOME.md
2. Scrivere contenuto task con formato specifico
... (troncato)
```

### TASK_SWARM_COMMON

- **Agente:**  cervella-backend
- **Priorita:** 

**Output:**
```
# Output: TASK_SWARM_COMMON

**Completato da:** cervella-backend
**Data:** 2026-01-05 03:20

## Cosa e' stato fatto

### 1. Creato ~/.local/lib/swarm-common.sh (v1.0.0)

Libreria condivisa con funzioni comuni:

**Funzioni Output:**
- `print_success()` - Output verde [OK]
- `print_error()` - Output rosso [ERROR]
- `print_warning()` - Output giallo [WARN]
- `print_info()` - Output blu [i]

**Funzioni Utility:**
- `find_project_root()` - Trova root progetto cercando .swarm/
- `time_ago()` - Converte timestamp in "Xm fa", "Xh fa"
- `time_ago_short()` - Versione breve (solo numero + unita)
- `get_assigned_to()` - Estrae "Assegnato a:" da task file
- `get_guardian_for_agent()` - Mappa agente -> guardiana appropriata

**Funzioni Configurazione:**
- `load_config()` - Carica ~/.swarm/config con defaults
- `get_claude_bin()` - Trova Claude CLI con fallback chain

**Funzioni Notifiche:**
- `notify()` - Invia notifica macOS
... (troncato)
```

### TASK_SWARM_HEARTBEAT_COMMAND

- **Agente:**  cervella-backend
- **Priorita:**  ALTA

**Output:**
```
# Output: TASK_SWARM_HEARTBEAT_COMMAND

**Completato da:** cervella-backend
**Data:** 2026-01-05

---

## Risultato

Creato comando `~/.local/bin/swarm-heartbeat` v1.0.0

### Verifiche Passate

- [x] Script creato in ~/.local/bin/swarm-heartbeat
- [x] Permessi eseguibili (chmod +x)
- [x] Funziona da qualsiasi progetto con .swarm/
- [x] Modalita --watch funziona
- [x] Colori corretti (ACTIVE verde, STALE giallo)

### Test Effettuati

```
$ swarm-heartbeat
[backend] ACTIVE (0s ago) - Test heartbeat
```

### Esempio Output

```
$ swarm-heartbeat
... (troncato)
```

### TASK_TEST_VISIBILITA

- **Agente:**  cervella-backend
- **Priorita:**  TEST

**Output:**
```
# Output: Test Sistema Visibilita

**Worker:** cervella-backend
**Data:** 2026-01-05
**Stato:** COMPLETATO

---

## Risultato

### Heartbeat Scritti: 3

1. `Inizio test` - Scritto all'inizio del task
2. `Meta test` - Scritto dopo 30 secondi
3. `Fine test` - Scritto dopo altri 30 secondi

### Notifiche Inviate: 2

1. Notifica di inizio task
2. Notifica di completamento (con suono Glass)

---

## Verifica

I heartbeat sono stati scritti in:
`.swarm/status/heartbeat_backend.log`

Il test del sistema di visibilita e' stato completato con successo.
```

### TASK_UPDATE_DNA_WHITELIST

- **Agente:**  cervella-docs
- **Priorita:**  ALTA

**Output:**
```
# Output: TASK_UPDATE_DNA_WHITELIST

**Completato da:** cervella-docs
**Data:** 5 Gennaio 2026
**Stato:** DONE

---

## Cosa Ho Fatto

### 1. Aggiornato cervella-orchestrator.md

Aggiunta **Regola 15: WHITELIST FILE** dopo la Regola 14.

La nuova regola definisce:
- **5 file/pattern** che la Regina puo modificare direttamente
- Comando `quick-task` come alternativa
- Comando `spawn-workers` per task complessi
- Regola "SE IN DUBBIO -> quick-task!"

### 2. Aggiornato CHECKLIST_AZIONE.md

Aggiunta sezione **"PRIMA DI OGNI EDIT (Whitelist Check!)"** con:
- Checklist visiva della whitelist
- Comandi pronti da copiare
- Logica decisionale chiara

---

## File Modificati
... (troncato)
```

## Task In Corso

- **HARDTEST_RACE_001** - Agente: cervella-backend
- **TASK_AUTO_REVIEW** - Agente:  cervella-devops
- **TASK_SWARM_REPORT** - Agente:  cervella-backend

## Task Pending

- **HARDTEST_NOTIFICA_001** - Agente: cervella-backend
- **HARDTEST_RACE_001** - Agente: cervella-backend
- **TASK_SWARM_REPORT** - Agente:  cervella-backend
- **TASK_TEMPLATES** - Agente:  cervella-backend

---

*Report generato da swarm-report v1.0.0*
